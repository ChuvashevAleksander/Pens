from rest_framework import viewsets
from .models import Product, Category, Storage
from .serializer import ProductSerializerGet, ProductSerializerPost
from rest_framework.permissions import IsAuthenticatedOrReadOnly
from django_filters.rest_framework import DjangoFilterBackend

class ProductAPIView(viewsets.ModelViewSet):
    queryset = Product.objects.all()
    serializer_class = ProductSerializerPost
    filter_backends = (DjangoFilterBackend, )
    filterset_fields = ['name', 'price', 'description', 'storage', 'category']

    def get_serializer_class(self):
        if self.request.method == 'POST':
            return ProductSerializerPost
        return ProductSerializerGet

# class CategoriesAPIView(viewsets.ModelViewSet):
#     queryset = Category.objects.all()
#     serializer_class = ProductSerializer
#
# class StorageAPIView(viewsets.ModelViewSet):
#     queryset = Category.objects.all()
#     serializer_class = ProductSerializer